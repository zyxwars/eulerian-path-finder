var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function i(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function a(e){return document.createTextNode(e)}function f(){return a(" ")}function g(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function p(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let v;function m(e){v=e}function b(){if(!v)throw new Error("Function called outside component initialization");return v}function y(){const e=b();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}const x=[],k=[],w=[],O=[],_=Promise.resolve();let E=!1;function j(e){w.push(e)}const S=new Set;let C=0;function z(){const e=v;do{for(;C<x.length;){const e=x[C];C++,m(e),I(e.$$)}for(m(null),x.length=0,C=0;k.length;)k.pop()();for(let e=0;e<w.length;e+=1){const t=w[e];S.has(t)||(S.add(t),t())}w.length=0}while(x.length);for(;O.length;)O.pop()();E=!1,S.clear(),m(e)}function I(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}const M=new Set;let L;function D(){L={r:0,c:[],p:L}}function P(){L.r||o(L.c),L=L.p}function A(e,t){e&&e.i&&(M.delete(e),e.i(t))}function T(e,t,n,o){if(e&&e.o){if(M.has(e))return;M.add(e),L.c.push((()=>{M.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function B(e){e&&e.c()}function N(e,n,l,s){const{fragment:c,on_mount:d,on_destroy:i,after_update:u}=e.$$;c&&c.m(n,l),s||j((()=>{const n=d.map(t).filter(r);i?i.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(j)}function q(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function H(e,t){-1===e.$$.dirty[0]&&(x.push(e),E||(E=!0,_.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(t,r,l,s,c,i,u,a=[-1]){const f=v;m(t);const g=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:a,skip_bound:!1,root:r.target||f.$$.root};u&&u(g.root);let h=!1;if(g.ctx=l?l(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return g.ctx&&c(g.ctx[e],g.ctx[e]=r)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](r),h&&H(t,e)),n})):[],g.update(),h=!0,o(g.before_update),g.fragment=!!s&&s(g.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);g.fragment&&g.fragment.l(e),e.forEach(d)}else g.fragment&&g.fragment.c();r.intro&&A(t.$$.fragment),N(t,r.target,r.anchor,r.customElement),z()}m(f)}class F{$destroy(){q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function X(t){let n,r,l,i,f=(t[0].solutionOrder?t[0].solutionOrder:t[0].edges.size)+"";return{c(){n=u("div"),r=a(f),h(n,"class","node svelte-182922q"),$(n,"left",t[0].x+"px"),$(n,"top",t[0].y+"px"),$(n,"background-color",t[0].isSelected?"red":t[0].edges.size%2==0?"chartreuse":"yellow"),$(n,"outline-color",t[0].isSelected?"darkred":t[0].edges.size%2==0?"forestgreen":"darkgoldenrod")},m(e,o){var d;c(e,n,o),s(n,r),l||(i=[g(n,"click",t[1]),g(n,"contextmenu",(d=t[2],function(e){return e.preventDefault(),d.call(this,e)})),g(n,"dblclick",t[2])],l=!0)},p(e,[t]){1&t&&f!==(f=(e[0].solutionOrder?e[0].solutionOrder:e[0].edges.size)+"")&&p(r,f),1&t&&$(n,"left",e[0].x+"px"),1&t&&$(n,"top",e[0].y+"px"),1&t&&$(n,"background-color",e[0].isSelected?"red":e[0].edges.size%2==0?"chartreuse":"yellow"),1&t&&$(n,"outline-color",e[0].isSelected?"darkred":e[0].edges.size%2==0?"forestgreen":"darkgoldenrod")},i:e,o:e,d(e){e&&d(n),l=!1,o(i)}}}function G(e,t,n){let{node:o}=t;const r=y();return e.$$set=e=>{"node"in e&&n(0,o=e.node)},[o,()=>{r("node_selected",o)},()=>{r("node_deleted",o)}]}class J extends F{constructor(e){super(),Y(this,e,G,X,l,{node:0})}}function K(t){let n,o,r,l;return{c(){n=u("div"),o=u("div"),h(o,"class","edge svelte-54e2i6"),h(n,"class","edge-area svelte-54e2i6"),$(n,"left",t[0].x+"px"),$(n,"top",t[0].y+"px"),$(n,"width",t[0].width+"px"),$(n,"height",t[0].height+"px"),$(n,"transform","rotate("+t[0].angleDeg+"deg)")},m(e,d){c(e,n,d),s(n,o),r||(l=g(n,"click",t[1]),r=!0)},p(e,[t]){1&t&&$(n,"left",e[0].x+"px"),1&t&&$(n,"top",e[0].y+"px"),1&t&&$(n,"width",e[0].width+"px"),1&t&&$(n,"height",e[0].height+"px"),1&t&&$(n,"transform","rotate("+e[0].angleDeg+"deg)")},i:e,o:e,d(e){e&&d(n),r=!1,l()}}}function Q(e,t,n){let{edge:o}=t;const r=y();return e.$$set=e=>{"edge"in e&&n(0,o=e.edge)},[o,()=>{r("edge_deleted",o)}]}class R extends F{constructor(e){super(),Y(this,e,Q,K,l,{edge:0})}}function U(t){let n,o,r,l,i,p,$,v,m,b,y,x,k,w,O,_,E;return{c(){n=u("div"),o=u("div"),r=u("button"),r.textContent="[ESC]",l=a("\r\n    Each node shows its degree (the number of edges connecting it to other nodes)\r\n    "),i=u("div"),i.innerHTML='<div class="node svelte-fv6p5k" style="background-color:yellow;"></div>\n      Marks and odd node',p=f(),$=u("div"),$.innerHTML='Click on a node to select it <div class="node svelte-fv6p5k" style="background-color:red;"></div>\n      , then click on another node to connect\n      <div class="node svelte-fv6p5k" style="background-color:chartreuse;"></div>\n      .',v=f(),m=u("div"),m.textContent="Click on connection to remove it.",b=f(),y=u("div"),y.textContent="Double click or right click a node to remove it.",x=f(),k=u("div"),k.textContent="You can always show this menu by pressing any key.w",w=f(),O=u("a"),O.textContent="Source code",h(r,"class","close svelte-fv6p5k"),h(i,"class","line svelte-fv6p5k"),h($,"class","line svelte-fv6p5k"),h(O,"href","https://github.com/zyxwars/eulerian-path-finder"),h(O,"class","source svelte-fv6p5k"),h(o,"class","tutorial svelte-fv6p5k"),h(n,"class","wrapper svelte-fv6p5k")},m(e,d){c(e,n,d),s(n,o),s(o,r),s(o,l),s(o,i),s(o,p),s(o,$),s(o,v),s(o,m),s(o,b),s(o,y),s(o,x),s(o,k),s(o,w),s(o,O),_||(E=g(r,"click",t[0]),_=!0)},p:e,i:e,o:e,d(e){e&&d(n),_=!1,E()}}}function V(e){const t=y();return[()=>{t("tutorial_closed")}]}class W extends F{constructor(e){super(),Y(this,e,V,U,l,{})}}function Z(e,t,n){const o=e.slice();return o[19]=t[n],o}function ee(e,t,n){const o=e.slice();return o[22]=t[n],o}function te(t){let n,o;return n=new W({}),n.$on("tutorial_closed",t[9]),{c(){B(n.$$.fragment)},m(e,t){N(n,e,t),o=!0},p:e,i(e){o||(A(n.$$.fragment,e),o=!0)},o(e){T(n.$$.fragment,e),o=!1},d(e){q(n,e)}}}function ne(e){let t,n;return t=new R({props:{edge:e[22]}}),t.$on("edge_deleted",e[8]),{c(){B(t.$$.fragment)},m(e,o){N(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.edge=e[22]),t.$set(o)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function oe(e){let t,n;return t=new J({props:{node:e[19]}}),t.$on("node_selected",e[6]),t.$on("node_deleted",e[7]),{c(){B(t.$$.fragment)},m(e,o){N(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.node=e[19]),t.$set(o)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function re(e){let t,n,r,l,$,v,m,b,y,x,k,w,O,_=e[2]&&te(e),E=e[1],j=[];for(let t=0;t<E.length;t+=1)j[t]=ne(ee(e,E,t));const S=e=>T(j[e],1,1,(()=>{j[e]=null}));let C=Object.values(e[0]),z=[];for(let t=0;t<C.length;t+=1)z[t]=oe(Z(e,C,t));const I=e=>T(z[e],1,1,(()=>{z[e]=null}));return{c(){t=u("main"),_&&_.c(),n=f(),r=u("div"),l=u("h4"),$=a("Is solvable: "),v=a(e[3]),m=f();for(let e=0;e<j.length;e+=1)j[e].c();b=f();for(let e=0;e<z.length;e+=1)z[e].c();y=f(),x=u("button"),x.textContent="Calculate Path",h(l,"class","is-solvable svelte-e0ce7l"),h(r,"class","background svelte-e0ce7l"),h(x,"class","action-btn svelte-e0ce7l"),h(t,"class","svelte-e0ce7l")},m(o,d){c(o,t,d),_&&_.m(t,null),s(t,n),s(t,r),s(r,l),s(l,$),s(l,v),s(t,m);for(let e=0;e<j.length;e+=1)j[e].m(t,null);s(t,b);for(let e=0;e<z.length;e+=1)z[e].m(t,null);s(t,y),s(t,x),k=!0,w||(O=[g(r,"click",e[5]),g(x,"click",e[10])],w=!0)},p(e,[o]){if(e[2]?_?(_.p(e,o),4&o&&A(_,1)):(_=te(e),_.c(),A(_,1),_.m(t,n)):_&&(D(),T(_,1,1,(()=>{_=null})),P()),(!k||8&o)&&p(v,e[3]),258&o){let n;for(E=e[1],n=0;n<E.length;n+=1){const r=ee(e,E,n);j[n]?(j[n].p(r,o),A(j[n],1)):(j[n]=ne(r),j[n].c(),A(j[n],1),j[n].m(t,b))}for(D(),n=E.length;n<j.length;n+=1)S(n);P()}if(193&o){let n;for(C=Object.values(e[0]),n=0;n<C.length;n+=1){const r=Z(e,C,n);z[n]?(z[n].p(r,o),A(z[n],1)):(z[n]=oe(r),z[n].c(),A(z[n],1),z[n].m(t,y))}for(D(),n=C.length;n<z.length;n+=1)I(n);P()}},i(e){if(!k){A(_);for(let e=0;e<E.length;e+=1)A(j[e]);for(let e=0;e<C.length;e+=1)A(z[e]);k=!0}},o(e){T(_),j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)T(j[e]);z=z.filter(Boolean);for(let e=0;e<z.length;e+=1)T(z[e]);k=!1},d(e){e&&d(t),_&&_.d(),i(j,e),i(z,e),w=!1,o(O)}}}function le(e,t,n){let o=[],r=0,l=null,s=[],c=!0,d=!1,i=[];var u;u=()=>{window.addEventListener("keypress",(e=>{n(2,c=!c)})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&n(2,c=!c)})),window.addEventListener("mouseup",(()=>{d&&(d=!1,n(0,o=Object.assign({},i)))}))},b().$$.on_mount.push(u);let a=!1;const f=()=>{let e=0;for(let t of Object.values(o)){if(0===t.edges.size)return"circuit not closed";t.edges.size%2==1&&e++}return 2===e?"Eulerian path":0===e&&"Eulerian cycle"},g=(e,t)=>{let n=1;t[e]=!0;for(let r of o[e].edges)!1===t[r]&&(n+=g(r,t));return n},h=(e,t)=>{let n={};for(let e of Object.keys(o))n[e]=!1;const r=g(e,n);o[e].edges.delete(t),o[t].edges.delete(e),n={};for(let e of Object.keys(o))n[e]=!1;const l=g(e,n);return o[e].edges.add(t),o[t].edges.add(e),r>l},p=()=>{if(!f())return;const e=Object.values(o);i={};for(let t of e)i[t.id]=Object.assign(Object.assign({},t),{edges:new Set([...t.edges])});let t=null;e:{for(let n of e)if(n.edges.size%2==1){t=n;break e}t=e[0]}e.forEach((e=>e.solutionOrder=""));let r=1;for(t.solutionOrder=1;0!==t.edges.size;){let e=null;e:{const n=[...t.edges];for(let r of n)if(!h(t.id,r)){e=o[r];break e}const[r]=t.edges;e=o[r]}t.edges.delete(e.id),e.edges.delete(t.id),console.log(`${t.id} -> ${e.id}`),e.solutionOrder=""===e.solutionOrder?++r:`${e.solutionOrder},${++r}`,t=e}n(0,o=Object.assign({},o)),d=!0};return[o,s,c,a,p,e=>{const t=++r;n(0,o[t]={id:t,solutionOrder:"",x:e.clientX,y:e.clientY,isSelected:!1,edges:new Set},o),n(3,a=f())},e=>{const t=e.detail;return t===l?(t.isSelected=!1,n(0,o=Object.assign({},o)),void(l=null)):l?(e=>{if(e.edges.has(l.id)&&l.edges.has(e.id))return;e.isSelected=!1,l.isSelected=!1,e.edges.add(l.id),l.edges.add(e.id);const t=Math.atan2(l.y-e.y,l.x-e.x);n(1,s=[...s,{x:l.x+30,y:l.y+5,width:(Math.abs(l.x-e.x)**2+Math.abs(l.y-e.y)**2)**.5,height:50,angleDeg:180+180*t/Math.PI,node1Id:l.id,node2Id:e.id}]),n(0,o=Object.assign({},o)),l=null,n(3,a=f())})(t):(t.isSelected=!0,n(0,o=Object.assign({},o)),void(l=t))},e=>{for(let t of Object.values(o))t.edges.delete(e.detail.id);n(1,s=s.filter((t=>t.node1Id!==e.detail.id&&t.node2Id!==e.detail.id))),delete o[e.detail.id],l=null,n(0,o=Object.assign({},o)),n(3,a=f())},e=>{for(let t of Object.values(o))t.id===e.detail.node1Id?t.edges.delete(e.detail.node2Id):t.id===e.detail.node2Id&&t.edges.delete(e.detail.node1Id);n(0,o=Object.assign({},o)),n(1,s=s.filter((t=>t!==e.detail))),n(3,a=f())},()=>n(2,c=!1),()=>p()]}return new class extends F{constructor(e){super(),Y(this,e,le,re,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
